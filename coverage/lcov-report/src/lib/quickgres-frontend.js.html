
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/lib/quickgres-frontend.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/lib</a> quickgres-frontend.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">1.54% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>3/195</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/57</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/34</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">1.63% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>3/184</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// Quickgres browser library to parse raw PostgreSQL protocol (why do it on the server...)
&nbsp;
import { Buffer } from 'buffer';
&nbsp;
function <span class="fstat-no" title="function not covered" >r32(</span>buf, off) {
<span class="cstat-no" title="statement not covered" >	return (buf[off] &lt;&lt; 24) | (buf[off + 1] &lt;&lt; 16) | (buf[off + 2] &lt;&lt; 8) | buf[off + 3];</span>
} // Read a 32-bit big-endian int from buffer buf at offset off.
function <span class="fstat-no" title="function not covered" >r16(</span>buf, off) {
<span class="cstat-no" title="statement not covered" >	return (buf[off] &lt;&lt; 8) | buf[off + 1];</span>
} // Read a 16-bit big-endian int from buffer buf at offset off.
// function w32(buf, v, off) { buf[off]=(v&gt;&gt;24)&amp;255; buf[off+1]=(v&gt;&gt;16)&amp;255; buf[off+2]=(v&gt;&gt;8)&amp;255; buf[off+3]=v&amp;255; return off+4; } // Write a 32-bit big-endian int to buffer at offset and return the offset after it.
// function w16(buf, v, off) { buf[off]=(v&gt;&gt;8)&amp;255; buf[off+1]=v&amp;255; return off+2;} // Write a 16-bit big-endian int to buffer at offset and return the offset after it.
&nbsp;
export class Client {
	// The Client class parses PostgreSQL protocol.
&nbsp;
<span class="fstat-no" title="function not covered" >	co</span>nstructor(binary) {
		// Need to know if it's binary or not, binary is 0 or 1.
<span class="cstat-no" title="statement not covered" >		this.stream = new RowReader(); </span>// Create a new RowReader to read in the results
<span class="cstat-no" title="statement not covered" >		this.stream.binary = binary; </span>// Set binary 0 or 1 for RowReader.
<span class="cstat-no" title="statement not covered" >		this._packet = { buf: null, head: Buffer.alloc(4), cmd: 0, length: 0, index: 0 }; </span>// Stores the current incoming protocol message.
	}
&nbsp;
<span class="fstat-no" title="function not covered" >	on</span>Data(arrayBuffer) {
		// On receiving data from the server, copy it to a packet. Once the packet is complete, pass it to the protocol parser in processPacket.
		const buf = <span class="cstat-no" title="statement not covered" >Buffer.from(arrayBuffer);</span> // Convert the received ArrayBuffer into a Buffer using https://github.com/feross/buffer
<span class="cstat-no" title="statement not covered" >		for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; buf.byteLength; ) {</span>
			// Process all bytes in buf.
<span class="cstat-no" title="statement not covered" >			if (this._packet.cmd === 0) <span class="cstat-no" title="statement not covered" >this._packet.cmd = buf[i++];</span></span>
			// Set new packet command and advance byte counter.
			else <span class="cstat-no" title="statement not covered" >if (this._packet.index &lt; 4) {</span>
				// Parsing packet length.
<span class="cstat-no" title="statement not covered" >				this._packet.head[this._packet.index++] = buf[i++]; </span>// Copy length bytes to header buffer, advancing byte counters.
<span class="cstat-no" title="statement not covered" >				if (this._packet.index === 4) {</span>
					// That was the last length byte.
<span class="cstat-no" title="statement not covered" >					this._packet.length = r32(this._packet.head, 0); </span>// Parse length as int32BE and store for later.
<span class="cstat-no" title="statement not covered" >					this._packet.buf = Buffer.allocUnsafe(this._packet.length + 1); </span>// Allocate a message buffer to receive the rest of the packet.
<span class="cstat-no" title="statement not covered" >					this._packet.buf[0] = this._packet.cmd; </span>// Copy the already received bytes to the start of the buffer.
<span class="cstat-no" title="statement not covered" >					this._packet.buf[1] = this._packet.head[0];</span>
<span class="cstat-no" title="statement not covered" >					this._packet.buf[2] = this._packet.head[1];</span>
<span class="cstat-no" title="statement not covered" >					this._packet.buf[3] = this._packet.head[2];</span>
<span class="cstat-no" title="statement not covered" >					this._packet.buf[4] = this._packet.head[3];</span>
				}
			}
<span class="cstat-no" title="statement not covered" >			if (this._packet.index &gt;= 4) {</span>
				// If the packet header is complete, copy the packet body to the message buffer.
				const copiedBytes = <span class="cstat-no" title="statement not covered" >buf.copy(</span>
					this._packet.buf,
					this._packet.index + 1,
					i,
					i + (this._packet.length - this._packet.index)
				); // Copy buf to _packet.buf, up to the length of the packet + 1 for the command byte.
<span class="cstat-no" title="statement not covered" >				this._packet.index += copiedBytes; </span>// Advance byte counters to keep track where in the packet we currently are.
<span class="cstat-no" title="statement not covered" >				i += copiedBytes; </span>// Advance loop byte counter by the amount of bytes processed thus far.
<span class="cstat-no" title="statement not covered" >				if (this._packet.index === this._packet.length) {</span>
					// If the packet is complete, process it and get ready for the next packet.
<span class="cstat-no" title="statement not covered" >					this.stream.write(this._packet.buf); </span>// Pass packet to protocol parser.
<span class="cstat-no" title="statement not covered" >					this._packet.cmd = this._packet.index = this._packet.length = 0; </span>// Reset the packet.
				}
			}
		}
	}
}
&nbsp;
export class RowReader {
	// RowReader receives query result messages and converts them into query result rows.
&nbsp;
<span class="fstat-no" title="function not covered" >	co</span>nstructor() {
<span class="cstat-no" title="statement not covered" >		this.rows = [];</span>
<span class="cstat-no" title="statement not covered" >		this.cmd = this.oid = this.binary = this.rowParser = undefined;</span>
<span class="cstat-no" title="statement not covered" >		this.rowCount = 0;</span>
	} // Set up initial state.
&nbsp;
<span class="fstat-no" title="function not covered" >	wr</span>ite(buf, off = <span class="branch-0 cbranch-no" title="branch not covered" >0)</span> {
<span class="cstat-no" title="statement not covered" >		switch (</span>
			buf[off++] // Receive a PostgreSQL protocol message buffer.
		) {
			case 68:
<span class="cstat-no" title="statement not covered" >				this.rows.push(new this.rowParser[this.binary](buf));</span>
<span class="cstat-no" title="statement not covered" >				break; </span>// D -- DataRow -- Parse the row and store it to rows.
			case 100:
<span class="cstat-no" title="statement not covered" >				this.rows.push(buf.slice(off + 4, off + r32(buf, off)));</span>
<span class="cstat-no" title="statement not covered" >				break; </span>// CopyData -- Slice the copy message payload and store it to rows.
			case 67: // C -- CommandComplete -- Parse the command complete message and set our completion state.
				const str = <span class="cstat-no" title="statement not covered" >buf.toString('utf8', 5, 1 + r32(buf, 1));</span> // The CommandComplete is a string starting with the completed command name and followed by possible table OID and number of rows affected.
				// eslint-disable-next-line
				const [_, cmd, oid, rowCount] =
					// eslint-disable-next-line
<span class="cstat-no" title="statement not covered" >					str.match(/^(\S+)( \d+)?( \d+)\u0000/) || str.match(/^([^\u0000]*)\u0000/);</span> // Parse out the command, table OID and rowCount. This deals with 'CMD oid rowCount', 'CMD rowCount' and 'CMD' cases.
<span class="cstat-no" title="statement not covered" >				this.cmd = cmd;</span>
<span class="cstat-no" title="statement not covered" >				this.oid = oid;</span>
<span class="cstat-no" title="statement not covered" >				this.rowCount = parseInt(rowCount || 0); </span>// Store the parsed data and exit.
<span class="cstat-no" title="statement not covered" >				break;</span>
			case 73:
<span class="cstat-no" title="statement not covered" >				this.cmd = 'EMPTY';</span>
<span class="cstat-no" title="statement not covered" >				break; </span>// I -- EmptyQueryResult -- Command completion message for an empty query string.
			case 115:
<span class="cstat-no" title="statement not covered" >				this.cmd = 'SUSPENDED';</span>
<span class="cstat-no" title="statement not covered" >				break; </span>// s -- PortalSuspended -- Completion message for a result batch from a partial results query.
			case 99:
<span class="cstat-no" title="statement not covered" >				this.cmd = 'COPY';</span>
<span class="cstat-no" title="statement not covered" >				break; </span>// CopyDone -- Completion message for a copy command.
			case 84: // T -- RowDescription -- Describes the column names and types of a query result. Parsed into a RowParser and cached. Written to output stream as well.
<span class="cstat-no" title="statement not covered" >				this.rowParser = new RowParser(buf); </span>// Create new RowParser from the packet and cache it to the current prepared statement.
<span class="cstat-no" title="statement not covered" >				break;</span>
			case 71:
			case 87:
			case 72: // Copy{In,Both,Out}Response -- Copy response describes the number of columns of the following CopyData messages and their formats (0 = string, 1 = binary.)
<span class="cstat-no" title="statement not covered" >				this.format = buf[off + 4];</span>
<span class="cstat-no" title="statement not covered" >				off += 5; </span>// Grab the global format code (0 = string, 1 = binary) and skip the message header.
<span class="cstat-no" title="statement not covered" >				this.columnCount = r16(buf, off);</span>
<span class="cstat-no" title="statement not covered" >				off += 2; </span>// Read the number of columns in the copy message.
<span class="cstat-no" title="statement not covered" >				this.columnFormats = []; </span>// Store the column formats in an array.
<span class="cstat-no" title="statement not covered" >				for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; this.columnCount; i++) {</span>
<span class="cstat-no" title="statement not covered" >					this.columnFormats[i] = r16(buf, off);</span>
<span class="cstat-no" title="statement not covered" >					off += 2;</span>
				} // Read the column formats (0 = string, 1 = binary.)
<span class="cstat-no" title="statement not covered" >				break;</span>
			default:
		}
	}
}
&nbsp;
export class RowParser {
	// RowParser parses DataRow buffers into objects and arrays.
&nbsp;
<span class="fstat-no" title="function not covered" >	co</span>nstructor(buf, off = <span class="branch-0 cbranch-no" title="branch not covered" >0)</span> {
		// Create a new RowParser from a DataRow message buffer.
<span class="cstat-no" title="statement not covered" >		this.buf = buf;</span>
<span class="cstat-no" title="statement not covered" >		this.off = off;</span>
<span class="cstat-no" title="statement not covered" >		this.columns = [];</span>
<span class="cstat-no" title="statement not covered" >		this.columnNames = []; </span>// Set up parsing state.
		const columnCount = <span class="cstat-no" title="statement not covered" >r16(buf, off + 5);</span>
<span class="cstat-no" title="statement not covered" >		off += 7; </span>// Read in the array of column descriptions.
<span class="cstat-no" title="statement not covered" >		for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; columnCount; i++) {</span>
			// Each column has a name, followed by table, type and format info.
			const nameEnd = <span class="cstat-no" title="statement not covered" >buf.indexOf(0, off);</span> // The name is a C string so we find the null byte terminator.
			const name = <span class="cstat-no" title="statement not covered" >buf.toString('utf8', off, nameEnd);</span>
<span class="cstat-no" title="statement not covered" >			off = nameEnd + 1; </span>// Then extract the string without the null byte.
			const tableOid = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 4; </span>// If the column is from a table, here's the table's OID. Otherwise zero.
			const tableColumnIndex = <span class="cstat-no" title="statement not covered" >r16(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 2; </span>// Along with the index of the column in the table. If the column is not from a table, this is zero.
			const typeOid = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 4; </span>// Next comes the PostgreSQL data type OID of the column. SELECT typname, oid, typarray FROM pg_type WHERE typarray != 0;
			const typeLen = <span class="cstat-no" title="statement not covered" >r16(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 2; </span>// The byteLength of a fixed size type. -1 means variable length type.
			const typeModifier = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 4; </span>// The type modifier, see pg_attribute.atttypmod.
			const binary = <span class="cstat-no" title="statement not covered" >r16(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 2; </span>// Whether the column is sent as binary (0 = string, 1 = binary.)
			const column = <span class="cstat-no" title="statement not covered" >{</span>
				name,
				tableOid,
				tableColumnIndex,
				typeOid,
				typeLen,
				typeModifier,
				binary,
			}; // Wrap the column description into an object.
<span class="cstat-no" title="statement not covered" >			this.columns.push(column); </span>// And add it to our list of columns.
		}
		const parserPrototype = <span class="cstat-no" title="statement not covered" >Object.create(RowParser.parserPrototype);</span> // Create a new row parser prototype.
<span class="cstat-no" title="statement not covered" >		parserPrototype.columnCount = columnCount; </span>// Store the number of columns to aid in parsing.
<span class="cstat-no" title="statement not covered" >		parserPrototype.rowColumns = this.columns; </span>// Store the column information to find column names and types when parsing.
<span class="cstat-no" title="statement not covered" >		for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; this.columns.length; i++) {</span>
			// Create column getters.
			const index = <span class="cstat-no" title="statement not covered" >i;</span> // Pull index into the local closure.
			const getter = <span class="cstat-no" title="statement not covered" >{</span>
				get: <span class="fstat-no" title="function not covered" >fu</span>nction() {
					// The getter at this index walks the row columns to find the column data.
					let off = <span class="cstat-no" title="statement not covered" >7,</span>
						buf = <span class="cstat-no" title="statement not covered" >this.rowBuffer;</span> // Set up walk state.
<span class="cstat-no" title="statement not covered" >					if (this.columnOffsets === undefined) {</span>
						// If we haven't cached the column offsets yet, let's do it.
<span class="cstat-no" title="statement not covered" >						this.columnOffsets = new Array(this.columnCount * 2); </span>// Lookup table for column offsets and lengths.
<span class="cstat-no" title="statement not covered" >						for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; this.columnCount; i++) {</span>
							// Walk through columns.
							const columnLength = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >							off += 4; </span>// Read in the column length.
<span class="cstat-no" title="statement not covered" >							this.columnOffsets[i * 2] = off; </span>// Cache column offset.
<span class="cstat-no" title="statement not covered" >							this.columnOffsets[i * 2 + 1] = columnLength; </span>// Cache column length.
<span class="cstat-no" title="statement not covered" >							if (columnLength &gt;= 0) <span class="cstat-no" title="statement not covered" >off += columnLength; </span></span>// Skip over the column data.
						}
					}
<span class="cstat-no" title="statement not covered" >					off = this.columnOffsets[index * 2]; </span>// Read the cached column offset
					const length = <span class="cstat-no" title="statement not covered" >this.columnOffsets[index * 2 + 1];</span> // Read the length of the wanted column.
<span class="cstat-no" title="statement not covered" >					return length &lt; 0 ? null : this.parseColumn(index, off, off + length); </span>// Parse the column data unless it's a null.
				},
			};
<span class="cstat-no" title="statement not covered" >			Object.defineProperty(parserPrototype, this.columns[index].name, getter); </span>// Bind the getter to the column name so that you can do `col = row.my_col`
<span class="cstat-no" title="statement not covered" >			Object.defineProperty(parserPrototype, index, getter); </span>// Bind the getter to the column index so that you can do `col = row[3]`
		}
<span class="cstat-no" title="statement not covered" >		this[1] = <span class="fstat-no" title="function not covered" >fu</span>nction(buf) {</span>
<span class="cstat-no" title="statement not covered" >			this.rowBuffer = buf;</span>
		}; // Binary row constructor just stores the DataRow buffer, it's parsed on access.
<span class="cstat-no" title="statement not covered" >		this[1].prototype = Object.create(parserPrototype); </span>// The prototype of the row stores the row description and methods to access columns. Note that all properties are camelCased to avoid name clashes with column names which are all lowercase.
<span class="cstat-no" title="statement not covered" >		this[1].prototype.dataFormat = 1; </span>// The binary rows have a binary data format.
<span class="cstat-no" title="statement not covered" >		this[1].prototype.parseColumn = <span class="fstat-no" title="function not covered" >fu</span>nction(i, start, end) {</span>
			// Parse a binary column, casts the column to a JS object.
			const parser = <span class="cstat-no" title="statement not covered" >TypeParser[this.rowColumns[i].typeOid];</span> // Find a parser for the column type.
<span class="cstat-no" title="statement not covered" >			return parser ? parser(this.rowBuffer, start, end) : this.rowBuffer.slice(start, end); </span>// If there's a parser, use it, otherwise slice the buffer.
		};
<span class="cstat-no" title="statement not covered" >		this[0] = <span class="fstat-no" title="function not covered" >fu</span>nction(buf) {</span>
<span class="cstat-no" title="statement not covered" >			this.rowBuffer = buf;</span>
		}; // A String row parser is a binary row parser with a different parseColumn method.
<span class="cstat-no" title="statement not covered" >		this[0].prototype = Object.create(parserPrototype); </span>// Copy over the binary row prototype.
<span class="cstat-no" title="statement not covered" >		this[0].prototype.dataFormat = 0; </span>// The string row parser's data format is string.
<span class="cstat-no" title="statement not covered" >		this[0].prototype.parseColumn = <span class="fstat-no" title="function not covered" >fu</span>nction(i, start, end) {</span>
<span class="cstat-no" title="statement not covered" >			return this.rowBuffer.toString('utf8', start, end);</span>
		}; // To parse a string column, convert a slice of the buffer into a string.
	}
}
&nbsp;
RowParser.parserPrototype = {
	toArray: <span class="fstat-no" title="function not covered" >fu</span>nction() {
		// Convert the row into a proper Array.
		let off = <span class="cstat-no" title="statement not covered" >7,</span>
			buf = <span class="cstat-no" title="statement not covered" >this.rowBuffer,</span>
			dst = <span class="cstat-no" title="statement not covered" >new Array(this.columnCount);</span> // Create parsing state and result array.
<span class="cstat-no" title="statement not covered" >		for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; this.columnCount; i++) {</span>
			// Go through the columns.
			const columnLength = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 4; </span>// Each column has an i32 length, followed by the column data.
<span class="cstat-no" title="statement not covered" >			if (columnLength &gt;= 0) {</span>
<span class="cstat-no" title="statement not covered" >				dst[i] = this.parseColumn(i, off, off + columnLength);</span>
<span class="cstat-no" title="statement not covered" >				off += columnLength;</span>
			} // Store the column data into the result array.
			else <span class="cstat-no" title="statement not covered" >dst[i] = null; </span>// If the length is negative, the column is null.
		}
<span class="cstat-no" title="statement not covered" >		return dst; </span>// Return the result array.
	},
&nbsp;
	toObject: <span class="fstat-no" title="function not covered" >fu</span>nction() {
		// Convert the row into a column name -&gt; column value hash table object.
		let off = <span class="cstat-no" title="statement not covered" >7,</span>
			buf = <span class="cstat-no" title="statement not covered" >this.rowBuffer,</span>
			dst = <span class="cstat-no" title="statement not covered" >{};</span> // Set up parsing state and result object. Off 7 skips over the header and column count (which we know already.)
<span class="cstat-no" title="statement not covered" >		for (let i = <span class="cstat-no" title="statement not covered" >0;</span> i &lt; this.columnCount; i++) {</span>
			// Go through the columns.
			const columnLength = <span class="cstat-no" title="statement not covered" >r32(buf, off);</span>
<span class="cstat-no" title="statement not covered" >			off += 4; </span>// Read the length of the column.
<span class="cstat-no" title="statement not covered" >			if (columnLength &gt;= 0) {</span>
<span class="cstat-no" title="statement not covered" >				dst[this.rowColumns[i].name] = this.parseColumn(i, off, off + columnLength);</span>
<span class="cstat-no" title="statement not covered" >				off += columnLength;</span>
			} // Parse column into result object property.
			else <span class="cstat-no" title="statement not covered" >dst[this.rowColumns[i].name] = null; </span>// A negative length means a null value.
		}
<span class="cstat-no" title="statement not covered" >		return dst; </span>// Return the result object.
	},
};
&nbsp;
const toUtf8 = <span class="fstat-no" title="function not covered" >fu</span>nction(buf) {
<span class="cstat-no" title="statement not covered" >	if (typeof TextDecoder !== 'undefined') {</span>
<span class="cstat-no" title="statement not covered" >		return new TextDecoder().decode(buf);</span>
	} else {
<span class="cstat-no" title="statement not covered" >		buf.toString();</span>
	}
};
&nbsp;
export const TypeParser = {
	serialize: <span class="fstat-no" title="function not covered" >fu</span>nction(value) {
<span class="cstat-no" title="statement not covered" >		if (value instanceof Buffer) <span class="cstat-no" title="statement not covered" >return Buffer.from(value);</span></span>
		const t = <span class="cstat-no" title="statement not covered" >typeof value;</span>
		let b;
<span class="cstat-no" title="statement not covered" >		if (t === 'boolean') {</span>
<span class="cstat-no" title="statement not covered" >			b = Buffer.allocUnsafe(1);</span>
<span class="cstat-no" title="statement not covered" >			b[0] = value ? 1 : 0;</span>
		} else <span class="cstat-no" title="statement not covered" >if (t === 'number') {</span>
<span class="cstat-no" title="statement not covered" >			b = Buffer.allocUnsafe(4);</span>
<span class="cstat-no" title="statement not covered" >			if ((value | 0) === value) <span class="cstat-no" title="statement not covered" >b.writeInt32BE(value);</span></span>
			else <span class="cstat-no" title="statement not covered" >b.writeFloatBE(value);</span>
		} else <span class="cstat-no" title="statement not covered" >if (t === 'bigint') {</span>
<span class="cstat-no" title="statement not covered" >			b = Buffer.allocUnsafe(8);</span>
<span class="cstat-no" title="statement not covered" >			b.writeBigInt64BE(value);</span>
		} else <span class="cstat-no" title="statement not covered" >if (t === 'string') {</span>
<span class="cstat-no" title="statement not covered" >			b = Buffer.from(value);</span>
		} else <span class="cstat-no" title="statement not covered" >if (t === 'object') {</span>
<span class="cstat-no" title="statement not covered" >			b = Buffer.from(JSON.stringify(value));</span>
		}
<span class="cstat-no" title="statement not covered" >		return b;</span>
	},
	16: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >!!buf[start],</span> // bool
	17: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >buf.slice(start, end),</span> // bytea
	18: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >buf[start],</span> // char
	19: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >toUtf8(buf.slice(start, buf.indexOf(0, start))),</span> // name
	20: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >buf.readBigInt64BE(start),</span> // int8
	21: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >r16(buf, start),</span> // int2
	// 22 int2vector
	23: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >r32(buf, start),</span> // int4
	// 24 regproc
	// 1082 date
	// 1083 time
	// 1266 timetz
	1114: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; {
		// 1114 timestamp
		const dv = <span class="cstat-no" title="statement not covered" >new DataView(buf.buffer.slice(start, end));</span>
		const t = <span class="cstat-no" title="statement not covered" >dv.getInt32(0, false);</span>
		const t2 = <span class="cstat-no" title="statement not covered" >dv.getInt32(4, false);</span>
<span class="cstat-no" title="statement not covered" >		return new Date(t * 4294967.296 + t2 / 1000 + 946656000000);</span>
	},
	1184: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; {
		// 1184 timestamptz
		const dv = <span class="cstat-no" title="statement not covered" >new DataView(buf.buffer.slice(start, end));</span>
		const t = <span class="cstat-no" title="statement not covered" >dv.getInt32(0, false);</span>
		const t2 = <span class="cstat-no" title="statement not covered" >dv.getInt32(4, false);</span>
<span class="cstat-no" title="statement not covered" >		return new Date(t * 4294967.296 + t2 / 1000 + 946656000000);</span>
	},
	// 1186 interval
	2950: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; {
		// 2950 uuid
		const hex = <span class="cstat-no" title="statement not covered" >buf.slice(start, end).toString('hex');</span>
<span class="cstat-no" title="statement not covered" >		return hex.replace(/^(.{8})(.{4})(.{4})(.{4})(.{12})$/, '$1-$2-$3-$4-$5');</span>
	},
	25: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >toUtf8(buf.slice(start, end)),</span> // text
	26: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >r32(buf, start),</span> // oid
	114: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >JSON.parse(toUtf8(buf.slice(start, end))),</span> // json
	142: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >toUtf8(buf.slice(start, end)),</span> // xml
	700: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >buf.readFloatBE(start),</span> // float4
	701: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >buf.readDoubleBE(start),</span> // float8
	1043: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >toUtf8(buf.slice(start, end)),</span> // varchar
	3802: <span class="fstat-no" title="function not covered" >(b</span>uf, start, end) =&gt; <span class="cstat-no" title="statement not covered" >JSON.parse(toUtf8(buf.slice(start + 1, end))),</span> // jsonb
};
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank">istanbul</a>
                at Wed Apr 22 2020 12:40:56 GMT+0800 (Hong Kong Standard Time)
            </div>
        </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
    